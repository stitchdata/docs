---
# -------------------------- #
#     USING THIS TEMPLATE    #
# -------------------------- #

## NEED HELP USING THIS TEMPLATE? SEE:
## https://docs-about-stitch-docs.netlify.com/reference/integration-templates/saas-foreign-keys/
## FOR INSTRUCTIONS & REFERENCE INFO

tap-reference: "lever"

version: "1"

foreign-keys:
  - id: "archive-reason-id"
    table: "archive_reasons"
    attribute: ""
    all-foreign-keys:
      - table: "archive_reasons"
        join-on: "id"
      - table: "candidate_applications"
        subattribute: "archived"
        join-on: "reason"
      - table: "candidates"
        subattribute: "archived"
        join-on: "reason"
      - table: "opportunity_applications"
        subattribute: "archived"
        join-on: "reason"
      - table: "opportunities"
        subattribute: "archived"
        join-on: "reason"

  - id: "application-id"
    table: "opportunity_applications"
    attribute: ""
    all-foreign-keys:
      - table: "candidate_applications"
        join-on: "id"
      - table: "candidates"
        subattribute: "applications"
        join-on: "value"
      - table: "opportunities"
        subattribute: "applications"
        join-on: "value"
      - table: "opportunity_applications"
        join-on: "id"

  - id: "contact-id"
    table: ""
    attribute: "contact"
    all-foreign-keys:
      - table: "candidates"
      - table: "opportunities"

  - id: "offer-id"
    table: "opportunity_offers"
    attribute: ""
    all-foreign-keys:
      - table: "candidate_offers"
        join-on: "id"
      - table: "opportunity_offers"
        join-on: "id"
      - table: "requisitions"
        subattribute: "offerIds"
        join-on: "value"

  - id: "opportunity-id"
    table: "opportunities"
    attribute: "opportunityId"
    all-foreign-keys:
      - table: "candidate_applications"
        join-on: "candidateId"
      - table: "candidates"
        join-on: "id"
      - table: "opportunity_applications"
        join-on: "candidateId"
      - table: "opportunity_offers"
      - table: "opportunities"
        join-on: "id"

  - id: "posting-id"
    table: "postings"
    attribute: "posting"
    all-foreign-keys:
      - table: "candidate_applications"
      - table: "opportunity_applications"
      - table: "opportunity_offers"
      - table: "postings"
        join-on: "id"
      - table: "requisitions"
        subattribute: "postings"
        join-on: "value"

  - id: "referral-id"
    table: "opportunity_referrals"
    attribute: ""
    all-foreign-keys:
      - table: "candidate_referrals"
        join-on: "id"
      - table: "opportunity_referrals"
        join-on: "id"

  - id: "resume-id"
    table: "opportunity_resumes"
    attribute: ""
    all-foreign-keys:
      - table: "candidate_resumes"
        join-on: "id"
      - table: "opportunity_resumes"
        join-on: "id"

  - id: "requisition-id"
    table: "requisitions"
    attribute: ""
    all-foreign-keys:
      - table: "candidate_applications"
        subattribute: "requisitionForHire"
        join-on: "id"
      - table: "opportunity_applications"
        subattribute: "requisitionForHire"
        join-on: "id"
      - table: "requisitions"
        join-on: "id"

  - id: "source-id"
    table: "sources"
    attribute: ""
    all-foreign-keys:
      - table: "candidates"
        subattribute: "sources"
        join-on: "value"
      - table: "sources"
        join-on: "id"

  - id: "stage-id"
    table: "stages"
    attribute: "stage"
    all-foreign-keys:
      - table: "candidates"
      - table: "candidates"
        subattribute: "stageChanges"
        join-on: "toStageId"
      - table: "opportunities"
      - table: "opportunities"
        subattribute: "stageChanges"
        join-on: "toStageId"
      - table: "stages"
        join-on: "id"

  - id: "user-id"
    table: "users"
    attribute: "user"
    all-foreign-keys:
      - table: "candidate_applications"
        join-on: "postingHiringManager"
      - table: "candidate_applications"
        join-on: "postingOwner"
      - table: "candidate_applications"
        subattribute: "requisitionForHire"
        join-on: "hiringManagerOnHire"
      - table: "candidate_applications"
      - table: "candidate_offers"
        join-on: "creator"
      - table: "candidate_referrals"
        join-on: "referrer"
      - table: "candidate_referrals"
      - table: "candidates"
        subattribute: "followers"
        join-on: "value"
      - table: "candidates"
        join-on: "owner"
      - table: "candidates"
        subattribute: "stageChanges"
        join-on: "userId"
      - table: "opportunities"
        subattribute: "followers"
        join-on: "value"
      - table: "opportunities"
        join-on: "owner"
      - table: "opportunities"
        subattribute: "stageChanges"
        join-on: "userId"
      - table: "opportunity_applications"
        join-on: "postingHiringManager"
      - table: "opportunity_applications"
        join-on: "postingOwner"
      - table: "opportunity_applications"
        subattribute: "requisitionForHire"
        join-on: "hiringManagerOnHire"
      - table: "opportunity_applications"
      - table: "opportunity_offers"
        join-on: "creator"
      - table: "opportunity_referrals"
        join-on: "referrer"
      - table: "opportunity_referrals"
      - table: "postings"
        subattribute: "followers"
        join-on: "value"
      - table: "postings"
        join-on: "hiringManager"
      - table: "postings"
        join-on: "owner"
      - table: "postings"
      - table: "requisitions"
        join-on: "creator"
      - table: "requisitions"
        join-on: "hiringManager"
      - table: "requisitions"
        join-on: "owner"
---