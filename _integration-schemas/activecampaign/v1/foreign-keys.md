---
# -------------------------- #
#     USING THIS TEMPLATE    #
# -------------------------- #

## NEED HELP USING THIS TEMPLATE? SEE:
## https://docs-about-stitch-docs.netlify.com/reference/integration-templates/saas-foreign-keys/
## FOR INSTRUCTIONS & REFERENCE INFO

tap-reference: "activecampaign"

version: "0.4"

foreign-keys:
  - id: "custom-field-id"
    table: "account_custom_fields"
    attribute: "id"
    all-foreign-keys:
      - table: "account_custom_fields"
        join-on: "id"
      - table: "account_custom_field_values"
        join-on: "custom_field_id"  

  - id: "address-id"
    table: "addresses"
    attribute: "id"
    all-foreign-keys:
      - table: "addresses"
        join-on: "id"
      - table: "campaigns"
        join-on: "addressid"
      - table: "forms"
        join-on: "addressid"    
  
  - id: "campaign-id"
    table: "campaigns"
    attribute: "id"
    all-foreign-keys:
      - table: "campaigns"
        join-on: "id"
      - table: "campaign_links"
        join-on: "campaignid"
      - table: "bounce_logs"
        join-on: "campaignid"
      - table: "campaign_lists"
        join-on: "campaignid" 
      - table: "campaign_messages"
        join-on: "campaignid"
      - table: "contact_lists"
        join-on: "campaign"     

  - id: "deal-custom-field-id"
    table: "deal_custom_fields"
    attribute: "id"
    all-foreign-keys:
      - table: "deal_custom_fields"
        join-on: "id"
      - table: "deal_custom_field_values"
        join-on: "custom_field_id"    

  - id: "deal-id"
    table: "deals"
    attribute: "id"
    all-foreign-keys:
      - table: "deals"
        join-on: "id"
      - table: "deal_custom_field_values"
        join-on: "deal_id"
      - table: "contact_deals"
        join-on: "deal"
      - table: "forms"
        join-on: "deals"
      - table: "deal_activities"
        join-on: "deal" 
      - table: "email_activities"
        join-on: "deal"
      - table: "contact_emails"
        join-on: "deal"     

  - id: "stage-id"
    table: "deal_stages"
    attribute: "id"
    all-foreign-keys:
      - table: "deal_stages"
        join-on: "id"
      - table: "deals"
        join-on: "stage"
      - table: "deal_groups"
        join-on: "stages"
      - table: "deal_activities"
        join-on: "stage"       

  - id: "pipeline-id"
    table: "deal_groups"
    attribute: "id"
    all-foreign-keys:
      - table: "deal_groups"
        join-on: "id"
      - table: "deals"
        join-on: "group"
      - table: "deal_stages"
        join-on: "group"
      - table: "deal_group_users"
        join-on: "deal_group"   

  - id: "account-id"
    table: "accounts"
    attribute: "id"
    all-foreign-keys:
      - table: "accounts"
        join-on: "id"
      - table: "deals"
        join-on: "account"
      - table: "contact_emails"
        join-on: "account" 
      - table: "email_activities"
        join-on: "account" 
      - table: "account_contacts"
        join-on: "account"
      - table: "account_custom_field_values"
        join-on: "account_id"       
        
  - id: "contact-id"
    table: "contacts"
    attribute: "id"
    all-foreign-keys:
      - table: "contacts"
        join-on: "id"
      - table: "deals"
        join-on: "contact"
      - table: "forms"
        join-on: "contacts"
      - table: "bounce_logs"
        join-on: "contact"  
      - table: "contact_data"
        join-on: "contact"
      - table: "contact_emails"
        join-on: "contact" 
      - table: "contact_lists"
        join-on: "contact"  
      - table: "contact_tags"
        join-on: "contact" 
      - table: "contact_conversions"
        join-on: "contact" 
      - table: "email_activities"
        join-on: "contact" 
      - table: "account_contacts"
        join-on: "contact" 
      - table: "contact_automations"
        join-on: "contact" 
      - table: "contact_custom_field_values"
        join-on: "contact" 
      - table: "contact_deals"
        join-on: "contact"           

  - id: "connection-id"
    table: "ecommerce_connections"
    attribute: "id"
    all-foreign-keys:
      - table: "ecommerce_connections"
        join-on: "id"
      - table: "ecommerce_customers"
        join-on: "connectionid"
      - table: "ecommerce_orders"
        join-on: "connectionid"
      - table: "ecommerce_orders"
        join-on: "connectionid"
      - table: "ecommerce_order_products"
        join-on: "connectionid"
      - table: "ecommerce_order_activities"
        join-on: "connectionid"     

  - id: "customer-id"
    table: "ecommerce_customers"
    attribute: "id"
    all-foreign-keys:
      - table: "ecommerce_customers"
        join-on: "id"
      - table: "ecommerce_orders"
        join-on: "customer"
      - table: "ecommerce_order_activities"
        join-on: "customerid"  

  - id: "order-id"
    table: "ecommerce_orders"
    attribute: "id"
    all-foreign-keys:
      - table: "ecommerce_orders"
        join-on: "id"
      - table: "ecommerce_order_products"
        join-on: "orderid"
      - table: "ecommerce_order_activities"
        join-on: "orderid"
      - table: "contact_custom_field_options"
        join-on: "orderid"  
      - table: "deal_stages"
        join-on: "order"   

  - id: "user-id"
    table: "users"
    attribute: "id"
    all-foreign-keys:
      - table: "users"
        join-on: "id"
      - table: "forms"
        join-on: "userid"
      - table: "lists"
        join-on: "userid"
      - table: "messages"
        join-on: "userid"
      - table: "saved_responses"
        join-on: "last_sent_user_id"
      - table: "tasks"
        join-on: "user"
      - table: "templates"
        join-on: "userid" 
      - table: "activities"
        join-on: "userid"
      - table: "campaign_lists"
        join: "userid"
      - table: "configs"
        join-on: "userid"
      - table: "contact_emails"
        join-on: "userid"
      - table: "deal_activities"
        join-on: "userid" 
      - table: "deal_group_users"
        join-on: "user" 
      - table: "email_activities"
        join-on: "userid" 
      - table: "sms"
        join-on: "userid" 
      - table: "automations"
        join-on: "userid"
      - table: "calendars"
        join-on: "userid"
      - table: "campaigns"
        join-on: "userid"                 

  - id: "task-type-id"
    table: "task_types"
    attribute: "id"
    all-foreign-keys:
      - table: "task_types"
        join-on: "id"
      - table: "tasks"
        join-on: "deal_task_type"

  - id: "list-id"
    table: "lists"
    attribute: "id"
    all-foreign-keys:
      - table: "lists"
        join-on: "id"
      - table: "webhooks"
        join-on: "listid"
      - table: "campaign_lists"
        join-on: "listid"  
      - table: "contact_lists"
        join-on: "list"  

  - id: "message-id"
    table: "messages"
    attribute: "id"
    all-foreign-keys:
      - table: "messages"
        join-on: "id"
      - table: "bounce_logs"
        join-on: "messageid"
      - table: "campaign_messages"
        join-on: "messageid"
      - table: "contact_emails"
        join-on: "messageid"
      - table: "contact_lists"
        join-on: "message"
      - table: "campaign_links"
        join-on: "messageid"  

  - id: "tag-id"
    table: "tags"
    attribute: "id"
    all-foreign-keys:
      - table: "tags"
        join-on: "id"
      - table: "contact_tags"
        join-on: "tag"   

  - id: "conversion-id"
    table: "conversions"
    attribute: "id"
    all-foreign-keys:
      - table: "conversions"
        join-on: "id"
      - table: "contact_conversions"
        join-on: "conversion" 
      - table: "conversion_triggers"
        join-on: "conversion"    
  
  - id: "conversion-trigger-id"
    table: "conversion_triggers"
    attribute: "id"
    all-foreign-keys:
      - table: "conversion_triggers"
        join-on: "id"
      - table: "contact_conversions"
        join-on: "conversiontrigger"

  - id: "automation-id"
    table: "automations"
    attribute: "id"
    all-foreign-keys:
      - table: "automations"
        join-on: "id"
      - table: "deal_activities"
        join-on: "automation" 
      - table: "goals"
        join-on: "automation"
      - table: "site_messages"
        join-on: "automation"  
      - table: "sms"
        join-on: "automation"
      - table: "automation_blocks"
        join-on: "automation" 
      - table: "campaigns"
        join-on: "automation"
      - table: "contact_automations"
        join-on: "automation"  

  - id: "segment-id"
    table: "segments"
    attribute: "id"
    all-foreign-keys:
      - table: "segments"
        join-on: "id"
      - table: "campaigns"
        join-on: "segmentid" 

  - id: "form-id"
    table: "forms"
    attribute: "id"
    all-foreign-keys:
      - table: "form"
        join-on: "id"
      - table: "contact_lists"
        join-on: "form"                                                    
---