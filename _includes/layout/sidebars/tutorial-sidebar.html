{% include misc/data-files.html %}

<div class="menu-list">

<ul id="mysidebar" class="nav" data-swiftype-index='false'>
    <!-- Stitch status widget -->
    <a class="status-page" href="http://status.stitchdata.com" target="_blank">
        <span class="color-dot"></span>
        <span class="color-description"></span>
    </a>

    <li>
    	<strong>In this guide:</strong>
    </li>

    {% if page.intro %}
	    <li>
			<a href="#">
		    	Introduction
		    </a>
		</li>
	{% endif %}

    {% if page.requirements %}
        <li>
            <a href="#prerequisites">
                Prerequisites
            </a>
        </li>
    {% endif %}

    {% for step in page.steps %}
        {% unless step.no-number == true %}
        	{% capture step-number %}
    	        {{ forloop.index }}
    	    {% endcapture %}
        {% endunless %}

		{% if step.substeps %}
            <li class="subfolders">
                <a data-toggle="collapse" href="#{{ step.anchor | append: "--menu" }}" aria-expanded="false" aria-controls="{{ step.anchor | append: "--menu" }}">
                    {% unless step.no-number == true %}
                        {{ step-number | strip }}: 
                    {% endunless %}
                    {{ step.title | flatify }} 
                    <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                </a>

                <ul class="collapse" id="{{ step.anchor | append: "--menu" }}">
            		<li>
                        <a href="#{{ step.anchor }}">{{ step-number | strip }}: {{ step.title | flatify }}</a>
                    </li>

               		{% for substep in step.substeps %}
                        {% unless substep.no-number == true %}
                   			{% capture substep-number %}
    			                {{ forloop.index }}
    			            {% endcapture %}
                        {% endunless %}

                		<li>
                            <a href="#{{ substep.anchor }}">
                                {% unless substep.no-number == true %}
                                    {{ step-number | strip }}.{{ substep-number | strip }}: 
                                {% endunless %}
                                {{ substep.title | flatify }}
                            </a>
                        </li>
                	{% endfor %}
                </ul>
            {% else %}
            	<li>
            		<a href="#{{ step.anchor }}">
                        {% unless step.no-number == true %}
		                   {{ step-number | strip }}: 
                        {% endunless %}
                           {{ step.title | flatify }}
		            </a>
		        </li>
    		{% endif %}
    	</li>
    {% endfor %}

    {% if page.next-steps %}
        <li>
            <a href="#next-steps">
                 Next steps
            </a>
        </li>
    {% endif %}

    {% if page.related %}
	    <hr>

	    <li>
	    	<strong>Related:</strong>
	    </li>

	    	{% for related in page.related %}
	    		<li>
            		<a href="{{ related.link | flatify }}">
		            	{{ related.title | flatify }}
		            </a>
		        </li>
	    	{% endfor %}
	{% endif %}
</ul>

</div>